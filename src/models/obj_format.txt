Спецификация OBJ
Формат файла OBJ — это формат файла ASCII. Если вы действительно хардкор, вы можете редактировать файлы в текстовом редакторе.

Исходная спецификация не указывает, каким должен быть символ конца строки, поэтому некоторые программы используют возврат каретки, а некоторые используют перевод строки. Возможно, вам придется преобразовать символы конца строки, если ваш текстовый редактор или программное обеспечение не может прочитать файл.

Первый символ каждой строки очень важен. Указывает тип команды. Если первый символ — #, эта строка является комментарием, а все остальное в этой строке игнорируется. Пустые строки также игнорируются.

Ниже мы перечисляем все общие команды. Первый символ всегда является типом команды. За этим следуют аргументы. Все, показанное в квадратных скобках, не является обязательным.

ФОРМАТ ФАЙЛА OBJ: КОМАНДА КОММЕНТАРИЕВ
# a comment line
Как мы уже говорили, символ # указывает, что строка является комментарием и должна игнорироваться. Первая строка обычно всегда является комментарием, который указывает, какая программа создала файл.

ФОРМАТ ФАЙЛА OBJ: КОМАНДА VERTEX
v x y z
Это вершинная команда. В этой упрощенной версии спецификации мы будем покрывать только многоугольные грани, поэтому команду vertex можно использовать для указания вершин многоугольника. При использовании поверхностей и кривых произвольной формы существует аналогичная команда vp, которую можно использовать для указания контрольных точек поверхности или кривой.

Команда v задает вершину по ее трем декартовым координатам x, y и z. Вершины автоматически присваивается имя в зависимости от порядка, в котором она находится в файле. Первая вершина в файле получает имя «1», вторая — «2», третья — «3» и так далее.

ФОРМАТ ФАЙЛА OBJ: КОМАНДА VERTEX NORMAL
vn x y z
Это вершинная нормальная команда. Указывает вектор нормали к поверхности. x, y и z — компоненты нормального вектора. Обратите внимание, что этот нормальный вектор еще не связан ни с одной вершиной. Мы должны будем связать его с вершиной позже с другой командой, называемой командой f .

Команда нормали вершин во многих файлах опущена, потому что, когда мы сгруппируем вершины в полигональные грани с помощью команды f , она автоматически определит вектор нормали по координатам вершин и порядку, в котором эти вершины появляются.

ФОРМАТ ФАЙЛА OBJ: ТЕКСТУРНАЯ КОМАНДА VERTEX
vt u v [w]
Команда текстуры вершины задает точку на карте текстуры, которую мы рассмотрели в предыдущем разделе. U и V — координаты X и Y в текстурной карте. Это будут числа с плавающей точкой от 0 до 1. Они сами по себе ничего вам не говорят, они должны быть сгруппированы с вершиной в команде f face, как и нормали вершин.

ФОРМАТ ФАЙЛА OBJ: КОМАНДА FACE
f v1[/vt1][/vn1] v2[/vt2][/vn2] v3[/vt3][/vn3] …
Команда лица, вероятно, самая важная команда. Он определяет многоугольную грань, сделанную из вершин, которые были до этой линии.

Для ссылки на вершину вы просто следуете неявной системе нумерации вершин. Например, «f 23 24 25 27» означает многоугольную грань, построенную по вершинам 23, 24, 25 и 27 по порядку.

Для каждой вершины вы можете связать команду vn , которая затем связывает эту вершину, нормальную к соответствующей вершине. Точно так же вы можете связать команду vt с вершиной, которая определит наложение текстуры для использования в этой точке.

Если вы указываете vt или vn для вершины, вы должны указать их для всех.